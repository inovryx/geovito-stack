---
import { translate } from '../lib/uiLanguage';
import { SUPPORTED_LANGUAGES } from '../lib/languages';
import Icon from './Icon.astro';

interface Props {
  currentLanguage: string;
  languageLinks: Record<string, string>;
  ui: Record<string, unknown>;
}

const { currentLanguage, languageLinks, ui } = Astro.props;
const languages = SUPPORTED_LANGUAGES;
---

<nav aria-label={translate(ui, 'language.switcherAria', {}, 'Language selector')} class="language-switcher">
  <ul class="language-tabs">
    {
      languages.map((language) => (
        <li>
          <a
            href={languageLinks[language] || `/${language}/`}
            class={`language-tab ${language === currentLanguage ? 'is-active' : ''}`}
            hreflang={language === 'zh-cn' ? 'zh-CN' : language}
          >
            <Icon name="Languages" size={16} />
            <span class="truncate">{language.toUpperCase()}</span>
          </a>
        </li>
      ))
    }
  </ul>
</nav>
